---
title: Donation Widget
description: Create a customizable donation widget with preset amounts and goal tracking
---

# Donation Widget

Build a complete donation system with multiple amount options, goal tracking, and donor recognition. Perfect for non-profits, open source projects, or content creators.

## Features

- **Preset donation amounts** with custom option
- **Goal tracking** with progress visualization
- **Donor recognition** and thank you messages
- **Mobile-responsive** design
- **Real-time updates** (with backend integration)

## Complete Example

### 1. Donation Widget Component

```tsx
// components/DonationWidget.tsx
import { useState, useEffect } from 'react';
import { SolanaPayButton } from '@solana-commerce/react-sdk';

interface DonationAmount {
  label: string;
  value: number; // in SOL
  lamports: number;
  popular?: boolean;
}

interface DonationGoal {
  title: string;
  target: number; // in SOL
  current: number; // in SOL
  description: string;
}

interface DonationWidgetProps {
  recipientWallet: string;
  projectName: string;
  goal?: DonationGoal;
  customAmounts?: DonationAmount[];
  onDonationComplete?: (amount: number, donor?: string) => void;
}

const DEFAULT_AMOUNTS: DonationAmount[] = [
  { label: '$5', value: 0.05, lamports: 50_000_000 },
  { label: '$10', value: 0.1, lamports: 100_000_000, popular: true },
  { label: '$25', value: 0.25, lamports: 250_000_000 },
  { label: '$50', value: 0.5, lamports: 500_000_000 },
  { label: '$100', value: 1.0, lamports: 1_000_000_000 },
];

export function DonationWidget({
  recipientWallet,
  projectName,
  goal,
  customAmounts = DEFAULT_AMOUNTS,
  onDonationComplete
}: DonationWidgetProps) {
  const [selectedAmount, setSelectedAmount] = useState<DonationAmount>(customAmounts[1]);
  const [customAmount, setCustomAmount] = useState<string>('');
  const [donorName, setDonorName] = useState<string>('');
  const [message, setMessage] = useState<string>('');
  const [isCustom, setIsCustom] = useState(false);
  const [recentDonations, setRecentDonations] = useState<any[]>([]);

  useEffect(() => {
    // Load recent donations (in real app, fetch from API)
    loadRecentDonations();
  }, []);

  const loadRecentDonations = () => {
    // Simulate loading recent donations
    const donations = [
      { name: 'Alice', amount: 0.1, message: 'Great work!', timestamp: new Date(Date.now() - 3600000) },
      { name: 'Bob', amount: 0.25, message: 'Keep it up!', timestamp: new Date(Date.now() - 7200000) },
      { name: 'Charlie', amount: 0.05, message: '', timestamp: new Date(Date.now() - 14400000) },
    ];
    setRecentDonations(donations);
  };

  const getCurrentAmount = (): DonationAmount => {
    if (isCustom && customAmount) {
      const value = parseFloat(customAmount);
      return {
        label: `$${(value * 100).toFixed(0)}`, // Assuming 1 SOL = $100 for display
        value,
        lamports: Math.floor(value * 1_000_000_000)
      };
    }
    return selectedAmount;
  };

  const handleDonationRequest = (paymentUrl: string) => {
    const amount = getCurrentAmount();
    console.log('Donation initiated:', {
      amount: amount.value,
      donor: donorName || 'Anonymous',
      message,
      paymentUrl
    });

    // Track donation in analytics
    if (typeof window !== 'undefined' && (window as any).gtag) {
      (window as any).gtag('event', 'donation_initiated', {
        value: amount.value,
        currency: 'SOL',
        custom_parameters: {
          project: projectName,
          donor_name: donorName || 'Anonymous'
        }
      });
    }
  };

  const handleDonationComplete = () => {
    const amount = getCurrentAmount();
    
    // Add to recent donations
    const newDonation = {
      name: donorName || 'Anonymous',
      amount: amount.value,
      message,
      timestamp: new Date()
    };
    
    setRecentDonations(prev => [newDonation, ...prev.slice(0, 4)]);
    
    // Reset form
    setDonorName('');
    setMessage('');
    setCustomAmount('');
    setIsCustom(false);
    
    if (onDonationComplete) {
      onDonationComplete(amount.value, donorName);
    }
  };

  const progressPercentage = goal 
    ? Math.min((goal.current / goal.target) * 100, 100)
    : 0;

  return (
    <div className="max-w-md mx-auto bg-white rounded-xl shadow-lg overflow-hidden">
      {/* Header */}
      <div className="bg-gradient-to-r from-purple-600 to-blue-600 p-6 text-white text-center">
        <h2 className="text-xl font-bold">{projectName}</h2>
        <p className="text-purple-100 mt-1">Support our mission</p>
      </div>

      <div className="p-6">
        {/* Goal Progress */}
        {goal && (
          <div className="mb-6">
            <div className="flex justify-between items-center mb-2">
              <span className="text-sm font-medium text-gray-700">{goal.title}</span>
              <span className="text-sm text-gray-500">
                {goal.current.toFixed(2)} / {goal.target} SOL
              </span>
            </div>
            
            <div className="w-full bg-gray-200 rounded-full h-3">
              <div 
                className="bg-gradient-to-r from-purple-500 to-blue-500 h-3 rounded-full transition-all duration-300"
                style={{ width: `${progressPercentage}%` }}
              />
            </div>
            
            <p className="text-xs text-gray-600 mt-2">{goal.description}</p>
          </div>
        )}

        {/* Amount Selection */}
        <div className="mb-4">
          <label className="block text-sm font-medium text-gray-700 mb-3">
            Choose donation amount
          </label>
          
          <div className="grid grid-cols-3 gap-2 mb-3">
            {customAmounts.map((amount) => (
              <button
                key={amount.label}
                onClick={() => {
                  setSelectedAmount(amount);
                  setIsCustom(false);
                }}
                className={`relative p-3 text-sm font-medium rounded-lg border-2 transition-colors ${
                  !isCustom && selectedAmount.label === amount.label
                    ? 'border-purple-500 bg-purple-50 text-purple-700'
                    : 'border-gray-200 hover:border-purple-300'
                }`}
              >
                {amount.popular && (
                  <span className="absolute -top-2 -right-2 bg-purple-500 text-white text-xs px-2 py-1 rounded-full">
                    Popular
                  </span>
                )}
                {amount.label}
                <div className="text-xs text-gray-500">
                  {amount.value} SOL
                </div>
              </button>
            ))}
          </div>
          
          {/* Custom Amount */}
          <div className="flex items-center space-x-2">
            <input
              type="checkbox"
              id="custom"
              checked={isCustom}
              onChange={(e) => setIsCustom(e.target.checked)}
              className="rounded"
            />
            <label htmlFor="custom" className="text-sm text-gray-700">
              Custom amount:
            </label>
            <input
              type="number"
              value={customAmount}
              onChange={(e) => setCustomAmount(e.target.value)}
              placeholder="0.00"
              step="0.01"
              min="0.001"
              disabled={!isCustom}
              className="flex-1 border rounded-md px-3 py-1 text-sm disabled:bg-gray-100"
            />
            <span className="text-sm text-gray-500">SOL</span>
          </div>
        </div>

        {/* Donor Information */}
        <div className="mb-4 space-y-3">
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              Name (optional)
            </label>
            <input
              type="text"
              value={donorName}
              onChange={(e) => setDonorName(e.target.value)}
              placeholder="Your name"
              className="w-full border rounded-md px-3 py-2 text-sm"
            />
          </div>
          
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              Message (optional)
            </label>
            <textarea
              value={message}
              onChange={(e) => setMessage(e.target.value)}
              placeholder="Leave a message of support..."
              rows={3}
              className="w-full border rounded-md px-3 py-2 text-sm resize-none"
            />
          </div>
        </div>

        {/* Donation Button */}
        <div className="mb-6">
          <SolanaPayButton
            recipient={recipientWallet}
            amount={getCurrentAmount().lamports}
            memo={`Donation to ${projectName}${donorName ? ` from ${donorName}` : ''}`}
            buttonText={`Donate ${getCurrentAmount().value.toFixed(3)} SOL`}
            onPaymentRequest={handleDonationRequest}
            onDialogClose={handleDonationComplete}
            style={{
              width: '100%',
              background: 'linear-gradient(135deg, #9945FF, #14F195)',
              color: 'white',
              border: 'none',
              borderRadius: '8px',
              padding: '16px',
              fontSize: '16px',
              fontWeight: 'bold',
              cursor: 'pointer',
              transition: 'transform 0.2s'
            }}
          />
        </div>

        {/* Recent Donations */}
        {recentDonations.length > 0 && (
          <div>
            <h3 className="text-sm font-medium text-gray-700 mb-3">
              Recent Supporters
            </h3>
            <div className="space-y-3">
              {recentDonations.map((donation, index) => (
                <div key={index} className="flex items-start space-x-3 p-3 bg-gray-50 rounded-lg">
                  <div className="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                    <span className="text-purple-600 font-semibold text-sm">
                      {donation.name.charAt(0).toUpperCase()}
                    </span>
                  </div>
                  
                  <div className="flex-1 min-w-0">
                    <div className="flex items-center justify-between">
                      <p className="text-sm font-medium text-gray-900">
                        {donation.name}
                      </p>
                      <p className="text-sm text-purple-600 font-medium">
                        {donation.amount.toFixed(3)} SOL
                      </p>
                    </div>
                    
                    {donation.message && (
                      <p className="text-xs text-gray-600 mt-1">
                        "{donation.message}"
                      </p>
                    )}
                    
                    <p className="text-xs text-gray-400 mt-1">
                      {formatTimeAgo(donation.timestamp)}
                    </p>
                  </div>
                </div>
              ))}
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

function formatTimeAgo(date: Date): string {
  const now = new Date();
  const diffInMinutes = Math.floor((now.getTime() - date.getTime()) / (1000 * 60));
  
  if (diffInMinutes < 1) return 'Just now';
  if (diffInMinutes < 60) return `${diffInMinutes}m ago`;
  
  const diffInHours = Math.floor(diffInMinutes / 60);
  if (diffInHours < 24) return `${diffInHours}h ago`;
  
  const diffInDays = Math.floor(diffInHours / 24);
  return `${diffInDays}d ago`;
}
```

### 2. Compact Donation Button

For simpler use cases, create a compact version:

```tsx
// components/CompactDonationButton.tsx
import { SolanaPayButton } from '@solana-commerce/react-sdk';

interface CompactDonationButtonProps {
  recipientWallet: string;
  projectName: string;
  amount?: number; // Default amount in SOL
  className?: string;
}

export function CompactDonationButton({
  recipientWallet,
  projectName,
  amount = 0.1, // Default 0.1 SOL
  className = ''
}: CompactDonationButtonProps) {
  const lamports = Math.floor(amount * 1_000_000_000);

  return (
    <div className={`inline-block ${className}`}>
      <SolanaPayButton
        recipient={recipientWallet}
        amount={lamports}
        memo={`Donation to ${projectName}`}
        buttonText={`☕ Tip ${amount} SOL`}
        style={{
          background: 'linear-gradient(135deg, #9945FF, #14F195)',
          color: 'white',
          border: 'none',
          borderRadius: '20px',
          padding: '8px 16px',
          fontSize: '14px',
          fontWeight: '600',
          cursor: 'pointer',
          display: 'inline-flex',
          alignItems: 'center',
          gap: '6px'
        }}
      />
    </div>
  );
}
```

### 3. Donation Goal Tracker

Track progress towards fundraising goals:

```tsx
// components/DonationGoalTracker.tsx
import { useEffect, useState } from 'react';

interface Goal {
  id: string;
  title: string;
  description: string;
  target: number; // in SOL
  current: number; // in SOL
  deadline?: Date;
  category: string;
}

interface DonationGoalTrackerProps {
  goals: Goal[];
  onGoalUpdate?: (goalId: string, newAmount: number) => void;
}

export function DonationGoalTracker({ goals, onGoalUpdate }: DonationGoalTrackerProps) {
  return (
    <div className="space-y-6">
      <h2 className="text-2xl font-bold text-gray-900">Fundraising Goals</h2>
      
      <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {goals.map((goal) => (
          <GoalCard key={goal.id} goal={goal} onUpdate={onGoalUpdate} />
        ))}
      </div>
    </div>
  );
}

function GoalCard({ 
  goal, 
  onUpdate 
}: { 
  goal: Goal; 
  onUpdate?: (goalId: string, newAmount: number) => void;
}) {
  const progressPercentage = Math.min((goal.current / goal.target) * 100, 100);
  const isCompleted = goal.current >= goal.target;
  const daysLeft = goal.deadline 
    ? Math.max(0, Math.ceil((goal.deadline.getTime() - Date.now()) / (1000 * 60 * 60 * 24)))
    : null;

  return (
    <div className="bg-white rounded-lg shadow-md overflow-hidden">
      <div className="p-6">
        <div className="flex items-center justify-between mb-2">
          <span className="inline-block px-2 py-1 text-xs font-semibold text-purple-600 bg-purple-100 rounded-full">
            {goal.category}
          </span>
          {isCompleted && (
            <span className="inline-block px-2 py-1 text-xs font-semibold text-green-600 bg-green-100 rounded-full">
              ✓ Completed
            </span>
          )}
        </div>
        
        <h3 className="text-lg font-semibold text-gray-900 mb-2">
          {goal.title}
        </h3>
        
        <p className="text-gray-600 text-sm mb-4">
          {goal.description}
        </p>
        
        <div className="mb-4">
          <div className="flex justify-between items-center mb-2">
            <span className="text-sm font-medium text-gray-700">
              Progress
            </span>
            <span className="text-sm text-gray-500">
              {goal.current.toFixed(2)} / {goal.target} SOL
            </span>
          </div>
          
          <div className="w-full bg-gray-200 rounded-full h-2">
            <div 
              className={`h-2 rounded-full transition-all duration-500 ${
                isCompleted 
                  ? 'bg-green-500' 
                  : 'bg-gradient-to-r from-purple-500 to-blue-500'
              }`}
              style={{ width: `${progressPercentage}%` }}
            />
          </div>
          
          <div className="flex justify-between items-center mt-2 text-xs text-gray-500">
            <span>{progressPercentage.toFixed(1)}% complete</span>
            {daysLeft !== null && (
              <span>
                {daysLeft > 0 ? `${daysLeft} days left` : 'Deadline passed'}
              </span>
            )}
          </div>
        </div>
        
        {!isCompleted && (
          <button 
            onClick={() => {
              // This would open a donation modal for this specific goal
              console.log('Contribute to goal:', goal.id);
            }}
            className="w-full bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 transition-colors font-medium"
          >
            Contribute
          </button>
        )}
      </div>
    </div>
  );
}
```

### 4. Usage Examples

#### Simple Blog/Content Creator

```tsx
// In your blog post or content page
import { CompactDonationButton } from './components/CompactDonationButton';

function BlogPost() {
  return (
    <article>
      <h1>My Latest Blog Post</h1>
      <p>Content goes here...</p>
      
      <div className="flex items-center justify-center my-8">
        <div className="text-center">
          <p className="text-gray-600 mb-3">Enjoyed this post?</p>
          <CompactDonationButton
            recipientWallet="YOUR_WALLET_ADDRESS"
            projectName="Your Blog"
            amount={0.05}
          />
        </div>
      </div>
    </article>
  );
}
```

#### Non-Profit Organization

```tsx
// components/NonProfitDonationPage.tsx
import { DonationWidget } from './components/DonationWidget';
import { DonationGoalTracker } from './components/DonationGoalTracker';

const goals = [
  {
    id: '1',
    title: 'Clean Water Project',
    description: 'Provide clean water access to 500 families',
    target: 50,
    current: 23.5,
    deadline: new Date('2024-12-31'),
    category: 'Water'
  },
  {
    id: '2',
    title: 'Education Initiative',
    description: 'Fund educational materials for local schools',
    target: 25,
    current: 18.2,
    category: 'Education'
  }
];

export function NonProfitDonationPage() {
  return (
    <div className="min-h-screen bg-gray-50 py-12">
      <div className="max-w-6xl mx-auto px-4">
        <div className="text-center mb-12">
          <h1 className="text-4xl font-bold text-gray-900 mb-4">
            Support Our Mission
          </h1>
          <p className="text-xl text-gray-600">
            Your donations help us make a difference in communities worldwide
          </p>
        </div>

        <div className="grid lg:grid-cols-2 gap-12 items-start">
          <div>
            <DonationGoalTracker goals={goals} />
          </div>
          
          <div className="sticky top-8">
            <DonationWidget
              recipientWallet="YOUR_WALLET_ADDRESS"
              projectName="Hope Foundation"
              goal={{
                title: 'Monthly Goal',
                target: 100,
                current: 67.3,
                description: 'Help us reach our monthly fundraising target'
              }}
              onDonationComplete={(amount, donor) => {
                console.log('Donation completed:', { amount, donor });
                // Update goals, send thank you email, etc.
              }}
            />
          </div>
        </div>
      </div>
    </div>
  );
}
```

## Features Included

This donation system provides:

- **✅ Multiple amount presets** with custom option
- **✅ Goal tracking** with visual progress
- **✅ Donor recognition** and messages
- **✅ Recent donations** display
- **✅ Mobile responsive** design
- **✅ Analytics integration** ready
- **✅ Customizable styling**

## Next Steps

Enhance your donation system with:

- **Backend integration** for real donation tracking
- **Email notifications** for donors and admins
- **Recurring donations** setup
- **Tax receipt** generation
- **Social sharing** buttons
- **Leaderboards** for top donors

This provides everything you need to accept donations with Solana Pay! 